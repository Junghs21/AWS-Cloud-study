# Chap06. AWS 데이터베이스 서비스
## 6.1 데이터베이스와 DBMS

### 데이터와 데이터베이스

- 데이터(data)
    - 어떤 이론을 세우는데 기초가 되는 자료
        - 문자와 숫자, 그림, 영상 등의 형태로 된 단위
    - 원시적인 자료에 불가할 뿐 특정한 의미와 가치는 없다.
- 정보(information)
    - 이런 데이터를 특정 목적에 따라 가공하고 이론을 세워 의미와 가치를 부여한 결과
- 데이터베이스(database)
    - 데이터를 하나에 모아 두는 것
    - 데이터를 모아 두는 집합
- DBMS(DataBase Management System)
    - 데이터베이스를 관리하는 시스템
    - 데이터에 대해 사용자의 논리적 명령을 해석하고 필요한 데이터를 찾아 주는 시스템

![데이터, 데이터베이스, DBMS][image1]

[image1]: https://hongong.hanbit.co.kr/wp-content/uploads/2021/11/DBMS_%EA%B0%9C%EB%85%90.png


> ✅ **데이터**: 현실 세계에서 측정하고 수집한 사실이나 값  
**정보**: 데이터를 특정 목적에 따라 가공하고 의미를 부여한 결과  
**데이터베이스**: 데이터를 하나에 모아 두는 집합  
**DBMS**: 데이터 명령을 해석하고 필요한 데이터를 찾아 주는 데이터베이스 관리 시스템


### 데이터베이스 모델 유형

데이터베이스는 구조, 운영, 저장 방식에 따라 크게 **계층형**(hierarchical), **네트워크형**, **관계형**(relational), **객체 지향형**(object-oreiented) 모델 유형으로 구분 가능

- **계층형 데이터베이스 모델**
    - 트리(tree) 구조 기반
    - 데이터는 1:N으로 상하 종속 관계 구조
    - 데이터에 빠르게 접근 가능
    - 구조 변경에 대한 유연성이 부족
- **네트워크형 데이터베이스 모델**
    - 계층형 데이터베이스의 정형화된 구조를 해결하기 위해 1:N뿐 아니라 1:1, N:N 형태의 구조가 가능
    - 하위 개체는 다수의 상위 개체를 가질 수 있어 형태가 좀 더 자유로움
    - 다양한 개체 간 연결에 따라 복잡성이 높아짐
        - 데이터베이스 전반의 구조를 이해하는데 다소 어려움
- **관계형 데이터베이스 모델**
    - 데이터의 논리적 관계를 초점으로 특정 개체 정보를 이용하여 열(column)과 행(row)으로 된 테이블(table)이라는 최소 단위로 구성
    - 데이터가 변화하면 쉽게 적용할 수 있는 장점
    - 시스템 자원을 많이 차지해서 상대적으로 느림
    - SQL(Structured Query Language)이라는 프로그래밍 언어를 사용하여 손쉽게 데이터베이스를 읽고 쓰고 해석
- **객체 지향형 데이터베이스 모델**
    - 객체(object)라는 형태의 최소 단위로 표현
    - 객체 집합을 정의하고 연결 구조를 확립하여 복잡한 객체 구조도 즉각적으로 표현
        - 사용자 정의 데이터, 멀티미디어 등 비정형 데이터도 지원
    - 관계형 데이터베이스의 호환성 문제와 복잡성에 따른 문제가 존재

> 현재 가장 보편적으로 사용하는 데이터베이스 모델은 **관계형 DBMS**


### 관계형 DBMS의 SQL 언어
SQL 명령은 데이터 정의, 데이터 조작, 데이터 제어로 분류

**SQL 데이터 정의**  
DBMS와 연계되는 다양한 응용 프로그램에서 요구하는 데이터의 형식과 구조를 정의하는 기능

- CREATE
    - 테이블을 구성하고 속성에 대한 제약을 정의하는 명령어
- ALTER
    - 생성된 테이블 속성을 정의하고 변경하는 명령어
- DROP
    - 생성된 테이블을 삭제하는 명령어

**SQL 데이터 조작**  
데이터 검색, 삽입, 삭제 등을 처리하는 인터페이스를 제공하는 기능

- SELECT
    - 테이블에 있는 정보를 가져오는 명령어
- INSERT
    - 테이블에 새로운 데이터를 삽입하는 명령어
- UPDATE
    - 테이블에 있는 데이터를 수정하는 명령어
- DELETE
    - 테이블에 있는 기존 데이터를 삭제하는 명령어

**SQL 데이터 제어**  
데이터 무결성 유지와 접근 권한 및 다수의 사용자 데이터베이스에 정확하게 접근하는 기능

- GRANT
    - 테이블에 대한 권한을 허용하는 명령어
- DENY
    - 테이블에 대한 권한을 차단하는 명령어
- REVOKE
    - 테이블에 대한 권한을 회수하는 명령어

![DBMS 인기도][image2]

[image2]: https://blog.kakaocdn.net/dn/bq0dKI/btqCO0vIFcx/2TgUiKJbkKin8aGEhlPwO1/img.png

[DB 인기도 랭킹 사이트](https://db-engines.com/en/ranking)


## 6.2 AWS 데이터베이스 서비스

사용자 요구 사항에 따라 다양한 데이터베이스 서비스가 존재

![DB 유형별 AWS 데이터베이스 서비스][image3]

[image3]: https://blog.kakaocdn.net/dn/c45BO9/btrxlpAzUGH/bILxyiK1oTRgSXpkkaYvo1/img.png


### Amazon RDS(Relational Database Service)

클라우드 환경에서 관계형 데이터베이스를 간편하게 설정하고 운영할 수 있는 서비스

- 원하는 성능 요구에 따라 다양한 데이터베이스 인스턴스 유형 선택 가능
- 관계형 데이터베이스 모델 유형
    - 테이블 구조에 행(row)과 열(column)으로 구성
- 관계형 데이터베이스 엔진을 사용하므로 SQL 언어 기반으로 데이터베이스를 관리

![Amazon RDS에서 제공하는 관계형 데이터베이스 엔진][image4]

[image4]: https://blog.kakaocdn.net/dn/Tengr/btrCAw2GDdD/cZVPA5xm1QJJBATgevZxr1/img.png

![관계형 데이터베이스 구조][image5]

[image5]: https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F992ECA335BE148210D

**Amazon RDS 장점**

- 사용 편의성이 높다.
- 모니터링 및 지표와 이벤트 알람을 이용하여 높은 관리 효율성을 보장
- 상대적으로 비용이 저렴
- 간편한 복제 기능을 이용하여 워크로드의 가용성과 확장성을 확보 가능
    - Amazon RDS가 지원하는 데이터 복제 기능인 **Multi-AZ**와 **Read Replica**

> ✅ Amazon RDS는 AWS에서 제공하는 관계형 데이터베이스 서비스로 다양한 관계형 데이터베이스 엔진을 사용 가능  
관계형 데이터베이스의 기본 구성은 행과 열로 된 테이블 형태이며, SQL 언어 기반으로 정형 데이터를 손쉽게 제어 가능


### Amazon RDS 데이터 복제

**Multi-AZ 복제 방식**

- 기본적으로 액티브-스탠바이(active-standby) 형태로 동작
- Primary DB가 액티브(활성) 상태, 보조의 Standby Replica가 스탠바이(대기) 상태
- Primary DB에 문제가 발생하면 Standby Replica를 Primary DB로 승격하여 동적으로 유지
- Multi-AZ 복제 방식은 **데이터 정합성**을 유지하는 것이 가장 중요
    - 이를 위해 **동기식 복제**(synchronous replica)로 다른 가용 영역에 있는 데이터 베이스와 데이터를 동기화

> 💡 **데이터 정합성** - 데이터가 서로 일관되게 일치하는 것  
**동기식 복제** - 데이터에 변화가 일어나면 원본 데이터를 복제해서 전달하여 동기화하는 것


**Read Replica 복제 방식**

- 원본 데이터를 Primary DB에 두고, 읽기 전용의 복제 데이터를 Read Replica 데이터베이스에 생성하여 유지
- 읽기 전용 데이터가 있는 Read Replica 데이터베이스는 확장이 가능
    - 데이터 읽기 처리 속도 향상
- Amazon RDS는 최대 5개의 Read Replica 데이터베이스를 복제할 수 있으며, 다른 리전까지 Read Replica 데이터베이스를 가질 수 있다.


> ✅ Amazon RDS의 복제 방식에는 Multi-AZ와 Read Replica가 있다.  
Multi-AZ는 동기식 복제 방식을 따르고 고가용성 유지가 목적이라면, Read Replica는 읽기 전용의 복제를 생성하여 성능을 확장하는 것이 목적


### Amazon Aurora

AWS가 개발한 자체의 클라우드 데이터베이스 엔진

엔터프라이즈 수준의 관계형 데이터베이스 엔진

**장점**

- 안정적이고 고성능의 데이터베이스 처리가 가능
- 오픈 소스를 기반으로 다른 관계형 데이터베이스와 호환성이 우수
- 비용 효율이 높다
- 다른 관계형 데이터베이스 엔진보다 스토리지 내결함성이 우수

**Amazon Aurora 복제 방식**

- MySQL
    - 데이터베이스 인스턴스에 EBS 스토리지가 연결되어 서로 다른 가용 영역으로 동기식 복제
- Amazon Aurora
    - 공유 스토리지를 통해 최소 3개의 가용 영역에서 2개 씩 총 6개의 복제 데이터를 가지고 있어 안정적인 서비스가 가능


> ✅ Amazon Aurora는 AWS에서 개발한 관계형 데이터베이스 엔진으로, Amazon RDS에 엔진을 올려 사용  
다른 관계형 데이터베이스 엔진에 비해 빠른 처리 속도와 안정적인 스토리지 구성으로 내결함성이 우수한 장점이 존재

### Amazon DynamoDB

**비관계형 데이터베이스**로, 키-값(key-value) 메소드를 사용하는 키-값 데이터베이스

- **키(key)**
    - 데이터의 고유한 식별자로 사용
- **값(value)**
    - 유형의 제한이 없어 단순한 개체(entity)뿐 아니라 복잡한 집합체까지 무엇이든 가능한 비정형 데이터를 입력 가능

이런 키와 값을 쌍으로 집합해서 저장

> 💡 **비관계형 데이터베이스** - 데이터가 서로 연결되지 않는 개별 형태로 저장하여 복잡하고 구조화되지 않은 데이터 유형에 적합한 데이터베이스

관계형 데이터베이스가 SQL언어를 사용했다면, Amazon DynamoDB는 비관계형 데이터베이스로 SQL문을 사용하지 않는다.

- NoSQL 데이터베이스라고도 부른다.

![Amazon DynamoDB의 데이터베이스 구조][image6]

[image6]: https://devio2023-media.developers.io/wp-content/uploads/2021/07/dynamodb_table-640x388.png


- 키-값 데이터베이스는 데이터베이스 구조가 단순하여 빠른 처리가 가능
    - Amazon DynamoDB는 대규모 환경에서도 일관되게 10밀리초 미만의 처리 성능을 제공
- Amazon DynamoDB는 별도 서버를 구축하지 않고 운영되는 서버리스(serverless)로 동작
    - 서버에 대한 프로비저닝, 패치, 소프트웨어 설치가 필요 없고 용량에 따라 테이블을 자동으로 확장 및 축소해서 관리 편의성이 높다.

> ✅ Amazon DynamoDB는 **비관계형 데이터베이스 서비스로 키-값을 사용하는 NoSQL 데이터베이스**  
**키** - 객체를 식별  
**값** - 비정형 데이터(이미지, 오디오 등) 형태로 저장  
안정적이고 빠른 데이터 처리에 따라 대규모 사이트 환경에 적합하고, 별도의 서버 구축 없이 동작해서 관리 편의성이 우수



### Amazon ElastiCache

**인-메모리 데이터베이스**로, **데이터를 메모리에 저장하는 형태로 동작**

- 데이터가 메모리상에 위치하여 데이터를 빠르게 처리할 수 있다는 장점이 존재
- 데이터 양이 많다면 데이터 처리가 느려질 수 있다.
    - 대용량 데이터에는 적합하지 않고 주로 데이터를 빠르게 자주 접근해야 할 때 사용

Amazon ElastiCache는 **Memcached 방식**과 **Redis 방식** 두 가지로 구분

- **Amazon ElastiCache for Memcached**
    - Memcached는 보편적으로 사용하는 메모리 객체 캐싱 시스템으로, 인-메모리 데이터베이스 서비스
    - Amazon ElastiCache for Memcached는 Memcached와 호환하여 자주 접근할 데이터를 메모리에 놓고 빠르게 처리 가능
- **Amazon ElastiCache for Redis**
    - Redis는 데이터베이스, 캐시, 메시지 브로커 및 대기열 용도로 사용되는 인-메모리 데이터베이스 서비스
    - 오픈 소스인 Redis 기반으로 구축
    - Redis API와 호환하여 개방형 Redis 데이터 형식으로 저장
    - 실시간 애플리케이션을 지원할 수 있도록 1밀리초 미만의 지연으로 빠른 데이터를 처리할 수 있다.

> ✅ Amazon ElastiCache는 인-메모리 기반의 데이터베이스 서비스로 데이터를 메모리에 저장하여 빠른 데이터 처리를 보장  
Memcached용과 Redis용으로 분류되며, 주로 실시간 애플리케이션의 데이터베이스 처리를 지원